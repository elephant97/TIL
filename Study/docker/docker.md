# 도커

### 도커란
* 개발자들과 시스템 관리자들이 애플리케이션을 컨테이너 안에 패키징하여, 실행 환경에 구애받지 않고 어디서나 동일하게 동작하도록 할 수 있는 오픈소스 프로젝트
* 이러한 컨테이너는 코드, 런타임, 시스템 도구, 시스템 라이브러리 등 애플리케이션이 실행되기 위해 필요한 모든것을 포함한다

### 도커 이미지와 컨테이너의 차이점
* 도커 이미지
  * 컨테이너 실행에 필요한 코드, 런타임, 라이브러리, 환경변수, 설정 파일 등을 포함하는 경량으 ㅣ독립적인 실행 가능한 소프트웨어 패키지
  * 이미지는 컨테이너를 생성하는데 사용됨
* 도커 컨테이너

### 도커파일이란
* 도커파일은 이미지를 구축할 때 필요한 설정과 명령어를 담고 있는 텍스트 문서
* 이를 통해 이미지 생성을 자동화하고 일관된 환경을 보장할 수 있음

### 도커 컨테이너가 시스템 리소스를 어떻게 격리하고, 다른 컨테이너 또는 호스트 시스템과의 충돌 없이 독립적으로 실행되도록 보장하는가?
* 도커 컨테이너는 리눅스의 네임스페이스와 컨트롤 그룹같은 기술을 사용하여 시스템 리소스를 격리함
* 이 두 기술은 컨테이너가 서로 호스트 시스템과 독립적으로 실행할 수 있도록 해줌
* **네임스페이스**
  * 네임스페이스는 컨테이너 프로세스가 시스템 나머지 부분으로부터 격리되도록 함
  * 파일 시스템 마운트, 네트워크, 사용자 ID, 등을 포함하여 여러가지 시스템 리소스를 컨테이너 별로 분리하여, 한 컨테이너 변경사항이 다른 컨테이너나 호스트 시스템에 영향을 주지 않도록 함
* **컨트롤 그룹**
  * 호스트에서 실행되고 있는 컨테이너의 리소스 사용량을 관리하고 제한함
  * 이 기술을 통해 CPU 시간, 시스템 메모리, 네트워크 대역폭 또는 기타 시스템 리소스의 양을 제한할 수 있음
  * 이는 하나의 컨테이너가 사용 가능한 모든 리소스를 독점하는 것을 방지하여 시스템의 안정성을 유지하고 컨테이너 간 리소스를 공정하게 분배
* 이러한 기술을 통해 도커는 컨테이너가 독립적으로 실행되며, 서로의 작업 공간을 침범하지 않고, 시스템의 안정성을 해치지 않도록 함
* 컨테이너화 된 애플리케이션이 동일한 호스트 상에서 격리되어 실행될 수 있게 하는 핵심적인 매커니즘
  
### 도커 컨테이너와 가상머신(vm)사이의 성능차이가 있는 이유
* **가상머신**
  * 리소스 분할
    * 가상머신은 각각의 VM에 대해 전체 운영 시스템을 실행하며, 이 운영 시스템은 물리적 하드웨어 자원의 일부를 독립적으로 할당받음
    * 각 VM이 완전히 독립적인 환경을 제공하지만, 추가적인 운영 시스템을 실행해야 하므로 상당한 양의 메모리와 CPU 오버헤드 발생
  * 오버헤드
    * VM은 하이퍼바이저라는 소프트웨어를 통해 물리적 하드웨어 위에서 실행됨
    * 하이퍼바이저는 물리적 자원을 가상화하여 여러 VM이 자원을 공유할 수 있게 관리함
    * 이 과정에서 발생하는 추가적인 리소스 사용이 성능에 영향을 미침
* **도커 컨테이너**
  * 리소스 공유
    * 도커 컨테이너는 호스트 운영 시스템의 커널을 공유하면서 실행됨
    * 컨테이너는 격리된 프로세스로서 호스트 시스템의 리소스에 직접 엑세스할 수 있으므로, 운영 시스템을 별도로 실행할 필요가 없음
    * 컨테이너가 VM에 비해 훨씬 가볍고 빠르게 시작될 수 있음을 의미
  * 오버헤드 감소
    * 도커 컨테이너는 가상화된 운영 시스템을 로드할 필요가 없으므로 VM에 비해 훨씬 적은 양의 시스템 리소스를 사용함
    * 이는 리소스를 더 효율적으로 사용하고 시스템의 전체적인 성능을 향상시키는 결과로 이어짐

### 도커 파일과 도커 컴포즈
* **Dockerfile**
  * 목적
    * Docker 이미지를 빌드하기 위한 스크립트로, 실행 환경, 설치할 소프트웨어, 실행 명령어 등을 정의
  * 사용 예
    * 개발 환경을 표준화하고, 의존성을 명확하게 기술하여 어디서나 동일한 환경을 재현할 수 있도록 함
* **Doker-Compose**
  * 목적
    * 여러 컨테이너를 함께 배포하고 관리하는 것을 단순화 하는 도구
    * docker-compose.yml 파일을 통해 서비스, 네트워크, 볼륨 등을 정의하고, 한 번의 명령어로 여러 컨테이너를 동시에 관리할 수 있음
  * 사용 예
    * 마이크로서비스 아키텍처와 같이 여러 컨테이너가 상호작용하는 복잡한 애플리케이션을 쉽게 관리하고 배포할 수 있음

