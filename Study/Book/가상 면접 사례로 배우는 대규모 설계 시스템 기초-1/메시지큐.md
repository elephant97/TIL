# 메시지 큐

<aside>
💡 메시지 큐는 메시지의 무손실(durability, 즉 메시지 큐에 일단 보관된 메세지는 소비자가 꺼낼 때 까지 안전히 보관된다는 특성)을 보장하는, 비동기 통신을 지원하는 컴포넌트

</aside>

- 메세지 큐는 메세지의 버퍼 역할을 하며, 비동기적으로 전송한다
- 메시지 큐의 기본 아키텍처는 생산자와 발행자(producer/publisher)라고 불리는 입력 서비스가 메세지를 만들어 메세지 큐를 발행(publish)함
- 큐에는 보통 소비자 혹은 구독자(consumer/subscriber)라 불리는 서비스 혹은 서버가 연결되어있는데,
메세지를 받아 그에 맞는 동작을 수행하는 역할을 함
    
    ![스크린샷 2024-04-06 오후 11.37.12.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/12e1539b-77ec-4876-a24f-9fd0b039045a/7af6b02c-a213-4e36-b769-4f154ce2d355/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-04-06_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_11.37.12.png)
    

- 메시지 큐를 이용하면 서비스 또는 서버간 결합이 느슨해져, 규모 확장성이 보장되어야 하는 안정적 애플리케이션을 구상하기 좋음
- 생산자는 소비자 프로세스가 다운되어 있어도 메시지를 발행할 수 있고, 소비자는 생산자 서비스가 가용한 상태가 아니더라도 메시지를 수신할 수 있음
- 큐의 크기가 커지먄 더 많은 작업 프로세스를 추가해야 처리 시간을 줄일 수 있음
- 큐가 항상 비어있는 상태라면, 작업 프로세스의 수는 줄일 수 있음

- 메세지큐의 주요 특징
    - 비동기 통신
        - 메시지 큐를 사용하면, 메시지의 전송자와 수신사자 서로 처리 속도와 상태에 구애받지 않고 독립적으로 작업을 진행할 수 있음
    - 탈중앙화
        - 메시지 큐는 서비스 간의 직접적인 연결을 제거하고, 메시지를 중앙의 큐에 저장함으로써 시스템간의 결합도를 낮춤
    - 신뢰성 있는 메시지 전달
        - 대부분의 메시지 큐 시스템은 메시지 전달의 신뢰성을 보장하기 위한 다양한 기능(예: 메시지 지속성, 확인 응답, 재시도 매커니즘 등)을 제공함
    - 확장성
        - 메시지 큐는 메시지의 생산과 소비 과정을 분리하여 시스템의 확장성을 개선함
        - 부하가 증가하면 추가 리소스나 인스턴스를 동적으로 할당하여 처리 능력을 쉽게 확장할 수 있음
    - 부하 분산
        - 메시지 큐는 여러 소비자에게 메시지를 분산시켜 처리할 수 있으므로, 부하 분산 및 병렬 처리가 가능함
