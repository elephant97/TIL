# 네트워크 프로그래밍 📌
> 데이터를 주고 받는 작업을 보통 네트워킹이라고 한다.

### OSI 7 layer
* 사용자와의 접촉
  * 애플리케이션 레이어(HTTP, FTP, TELNET)
    * 응용, 표현, 세션 계층
    * TCP통신을 함. 연결 기반 프로토콜이라고 불림
  * 트랜스포트 레이어(TCP, UDP)
    * 전송 계층
* 망과의 접촉
  * 네트워크 레이어
    * 네트워크 계층
  * 링크레이어
    * 데이터링크, 물리 계층

### TCP UDP
* TCP
  * 연결 기반 프로토콜이라 불린다
  * 상대방이 데이터를 받았는지를 확실히 보장할 수 있다.
  * 데이터를 보내는 경우에 전송이 성공되었다는 통보를 받는다.
  * 내부 절차가 매우복잡하게 되어있으며 UDP보다 비싸고 느리며, 무겁다.
* UDP
  * 다른 장비가 데이터를 제대로 받았는지에 대한 보장을 못한다.

### PORT
* SSL : 443
* 0~1023까지는 사용하는 것이 제한 되어있다.
* 16비트로 구성되어있어 65,535까지 사용할 수 있다.

### Socket 클래스
> 데이터를 보내는 쪽(클라이언트)에서 객체를 생성하여 사용함.        
> 데이터를 받는 쪽(서버)에서 클라이언트 요청을 받으면 요청에 대한 Socket객체를 생성하여 데이터를 처리함.       
> Socket은 원격에 있는 장비와의 연결 상태를 보관하고 있다.
* 서버 측 ServerSocket
  * 별도로 new 키워드를 사용하여 만들 필요는 없고 serverSoket클래스에서 제공하는 메소드에서 클라이언트 요청이 생기면
    Socket객체를 생성해서 전달 해 준다.
  * backlog라는 값이 있는데 이 값은 최대 대기 큐의 개수이다. 지정하지 않을 경우 기본적으로 **50개**이다.
  * **socket 클래스의 생성자에 주소와 포트를 지정하면 생성과 동시에 지정된 서버에 접속을 함**
  * 소켓 연결에 문제가 있을 경우 접속을 끊어주는 **Timeout메소드** 가 있다.
* 메서드
  * accept()
    > 새로운 소켓 연결을 기다리고ㅡ 연결이 되면 Socket 객체를 리턴
* 발생할 수 있는 예외
  * java.net.bindException
    > Address already in use. 이미 사용중인 포트를 사용하려 할때 발생
  * java.net.ConnectException
    > Connection refused 서버를 띄워놓지 않고 클라이언트 프로그램만 실행시켰을 때 발생

### UDP 통신의 DatagramSocket 클래스
> TCP와는 다르게 클래스 하나에서 보내는 역할과 받는 역할을 모두 수행할 수 있다.     
> **TCP는 스트림객체를 얻어 데이터를 주거나 받지만 UDP통신에는 스트림을 사용하지 않고 DatagramSocket클래스를 사용**
> 서버의 주소와 포트 번호를 지정하면 데이터를 받기 위한 객체가 아닌, 전송하기 위한 객체가 된다.
* receive(DatagramPacket packet)
  > 메소드 호출 시 요청을 대기하고, 만약 데이터를 받았을 때에는 packet객체에 데이터를 저장
* send(DatagramPacket packet)
  > packet 객체에 있는 데이터 전송
* DatagramPacket(byte[] buf, int length)
  > 해당 생성자만 데이터를 받기 위한 생성자이며, 나머지 생성자들은 데이터를 전송하기 위한 객체
* 메소드
  * getData()
    > byte[]로 전송받은 데이터를 리터남
  * getLength()
    > 전송받은 데이터의 길이를 int 타입으로 리턴함.

**UDP로 통신할 때에는 서버에서 데이터 받을 준비가 되어있지 않아도 클라이언트에서는 아무런 오류를 내지 않고 그냥 수행하도록 되어있으며, 이와는 반대로**      
**TCP의 경우에는 서버에 접속하지 못하면 ConnectException이 발생된다.**

### 웹페이지 요청
> URL이라는 클래스를 사용하여 간단한 요청이 가능하지만, 연결에 대한 상세한 설정을 할 수 없어 일반적으로 **Apache의 Http Components**를 많이 사용한다.
