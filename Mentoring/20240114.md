# 20240114(8íšŒì°¨) ë©˜í† ë§ ë‚´ìš© ì •ë¦¬ğŸ“’

### WebMVC vs Webflux

### session clustering 
* Clusteringì€ ì—¬ëŸ¬ ì»´í“¨í„°ë¥¼ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ í•˜ëŠ” ê¸°ìˆ ì„ ë§í•œë‹¤
* Session Clusteringì€ ê° WASì˜ ì„¸ì…˜ì„ ë¬¶ì–´ì„œ ê´€ë¦¬í•˜ëŠ” ë°©ì‹(ì„¸ì…˜ ë³µì œ)
  * **All-to-all Session Replication**
    * ê° WASì—ì„œ ìƒì„±ëœ ì„¸ì…˜ì„ ë‹¤ë¥¸ WASì™€ ë™ê¸°í™” í•œë‹¤
    * ì´ë ‡ê²Œí•˜ë©´ ì‚¬ìš©ìê°€ ì„œë²„ê°„ì— ì´ë™í•´ë„ ë™ì¼í•œ ì„¸ì…˜ ì •ë³´ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŒ
    * ì‚¬ìš©ìê°€ ê°™ì€ ë¬¶ìŒìœ¼ë¡œë§Œ ì ‘ì†í•œë‹¤ë©´ ë™ì¼í•œ ì„¸ì…˜ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë³´ì¥í•¨
    * í•œ ì„œë²„ì— ê³ ì •ë˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ íŠ¸ë˜í”½ ì ë¦¼ ë¬¸ì œì— ëŒ€í•´ ë³´ë‹¤ ììœ ë¡­ê³  ê°œë³„ ì„œë²„ì— ë¬¸ì œê°€ ìƒê²¨ë„ ì„¸ì…˜ ì •ë³´ ìœ ì§€ ê°€ëŠ¥
    * **ë‹¨ì **
      * ì„¸ì…˜ ë°ì´í„°ê°€ ì €ì¥ë  ë•Œ ë§ˆë‹¤ ëª¨ë“  ì„œë²„ì— í•´ë‹¹ ë°ì´í„°ê°€ ì…ë ¥ë˜ì–´ì•¼ í•˜ë¯€ë¡œ(ë™ê¸°í™” ê³¼ì •) ì„±ëŠ¥ì €í•˜ê°€ ì˜¬ ìˆ˜ ìˆë‹¤.
      * ê°œë³„ ì„œë²„ ì•ˆì—ì„œë„ ê° ì„œë²„ì˜ ì„¸ì…˜ ì •ë³´ê°€ ì•„ë‹Œ ë™ì¼ ê·¸ë£¹ìœ¼ë¡œ ëª¨ë“  ì„¸ì…˜ ì •ë³´ë¥¼ ì €ì¥í•´ì•¼ í•˜ë¯€ë¡œ ë§ì€ ë©”ëª¨ë¦¬ê°€ í•„ìš”í•¨
      * ì´ëŸ° ì„¸ì…˜ í´ëŸ¬ìŠ¤í„°ë§ ë°©ì‹ì„ ë³´ì™„í•˜ê³ ì, ëª¨ë“  wasê°€ ì•„ë‹Œ í•˜ë‚˜ì˜ ì„œë²„ì—ë§Œ ì„¸ì…˜ì„ ë™ê¸°í™”í•˜ê³ , ê·¸ ì™¸ ì„œë²„ì—ëŠ” ì„¸ì…˜ í‚¤ë§Œ ë“¤ê³ ìˆë„ë¡ í•˜ì—¬   
        ê°’ì„ ë°±ì—…í•˜ëŠ” primary-sendary session ë³µì œ ë°©ì‹ê³¼ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ë°©ì‹ì´ ì¡´ì¬í•¨
  * primary-secondary Session Replication
    * ì„œë²„ 1(primary)ê³¼ ì„œë²„ 2(primary)ì— ì„¸ì…˜ ê°ì²´ì˜ key-valueë¥¼ ë³µì œí•´ë‘ê³  ê·¸ ì™¸ì˜ ì„œë²„ì—ëŠ” ì„¸ì…˜ì˜ keyì— í•´ë‹¹í•˜ëŠ” ê°’ë§Œì„ ë³µì œ
    * ê°ì²´ ì „ì²´ë¥¼ ë³µì œí–ˆë˜ ë°©ì‹ì¸ all-to-all ë°©ì‹ë³´ë‹¤ ì‹œê°„ì´ ì ˆì•½ëœë‹¤ëŠ” ì¥ì  ì¡´ì¬
    * **ë‹¨ì **
      * primaryì„œë²„ì™€ secondaryì„œë²„ë¥¼ ì œì™¸í•œ ì„œë²„ì— ì„¸ì…˜ ì •ë³´ë¥¼ ìš”ì²­í•˜ê²Œ ë˜ëŠ” ê²½ìš° ì„¸ì…˜ keyì— í•´ë‹¹í•˜ëŠ” ì„¸ì…˜ ê°ì²´ë¥¼ ì–»ê¸°ìœ„í•´ primaryì„œë²„ì— ì§ˆì˜í•˜ëŠ” ê³¼ì •ì´ ì¶”ê°€ë¡œ í•„ìš”í•¨
      * ìœ„ì˜ ê³¼ì •ìœ¼ë¡œ ì¸í•´ ì—¬ì „íˆ ì„±ëŠ¥ì  í•œê³„ê°€ ì¡´ì¬í•˜ê²Œ ë¨

### Sticky Session 
* ë¡œë“œë°¸ëŸ°ì„œê°€ ì„¸ì…˜ ê¸°ê°„ ë™ì•ˆ ë™ì¼í•œ í´ë¼ì´ì–¸íŠ¸ì˜ requestë¥¼ í•­ìƒ ë™ì¼í•œ ì„œë²„ë¡œ ë¼ìš°íŒ… í•´ì£¼ëŠ” ê¸°ëŠ¥
* ë¡œë“œë°¸ëŸ°ì„œëŠ” ìœ ì €ê°€ ì²«ë²ˆì§¸ ì„¸ì…˜ì„ ìƒì„±í•œ ì„œë²„ë¡œ ëª¨ë“  ìš”ì²­ì„ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•˜ì—¬ ê³ ì •ëœ ì„¸ì…˜ë§Œ ì‚¬ìš©í•˜ê²Œ í•¨
* ì—¬ëŸ¬ ì„œë²„ë“¤ì€ ì„¸ì…˜ ë°ì´í„°ë¥¼ êµí™˜í•  í•„ìš”ê°€ ì—†ì–´ì§€ë©°, ì •í•©ì„± ì´ìŠˆ(ì‹œìŠ¤í…œ ë‚´ì—ì„œ ë°ì´í„° ë˜ëŠ” ì •ë³´ê°€ ì¼ê´€ë˜ì§€ ì•Šì€ ìƒíƒœ)ì—ì„œ ììœ ë¡œì›Œ ì§
* **ë‹¨ì **
  * íŠ¹ì • ì„œë²„ì— ê³¼ë¶€í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°, íŠ¸ë˜í”½ì´ ê· ë“±í•˜ê²Œ ë°°ë¶„ë  ìˆ˜ ì—†ë‹¤
  * ë¡œë“œë°¸ëŸ°ì‹±ìœ¼ë¡œ ì¸í•´ íŠ¸ë˜í”½ì´ ë¶„ì‚°ë˜ê¸´ í•˜ì§€ë§Œ, Sticky Sessionì„ ì‚¬ìš©í–ˆì„ ë•Œ íŠ¹ì • ì„œë²„ì— ëª°ë¦° ì‚¬ëŒë§Œ í™œë°œí•œ ê²½ìš° í•´ë‹¹ ì„œë²„ì— ê³¼ë¶€í•˜ê°€ ë°œìƒë  ìˆ˜ ìˆë‹¤.
 
### Session storage
* ì¤‘ì•™ì§‘ì¤‘ì‹ ì„¸ì…˜ ì €ì¥ì†Œ
  * ëª¨ë“  ì„¸ì…˜ ì •ë³´ë¥¼ ì¤‘ì•™ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ìºì‹œ ì‹œìŠ¤í…œ(Redis ë“±)
  * ê° WASëŠ” ì„¸ì…˜ ìƒì„± ë° ì¡°íšŒë¥¼ ìœ„í•´ ì¤‘ì•™ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•¨
  * ì„¸ì…˜ ì •ë³´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ì‰½ì§€ë§Œ, ì¤‘ì•™ ì €ì¥ì†Œì˜ ê¸°ëŠ¥ê³¼ ê°€ìš©ì„±ì´ ì „ì²´ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ê³¼ ê°€ìš©ì„±ì— í° ì˜í–¥ì„ ë¯¸ì¹¨

  
### ìºì‹±ì´ë€
* ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„° ê²€ìƒ‰ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ 
* ìºì‹±ì´ë€ ìì£¼ ì ‘ê·¼í•˜ëŠ” ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ê¸°ë°˜ì˜ ì‹œìŠ¤í…œì— ì €ì¥í•˜ëŠ” ê²ƒì„ ì˜ë¯¸
* ë§Œì•½ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ë¡œ ë ˆë””ìŠ¤ë¥¼ ì±„íƒí•œë‹¤ë©´, ì„¸ì…˜ ë°ì´í„°ë¥¼ ë ˆë””ìŠ¤ì— ìºì‹±í•˜ê³ , ì¡°íšŒí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
* ë§Œì•½ RDBì—ì„œ ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë ˆë””ìŠ¤ì— ìºì‹±í•˜ì—¬ ì¡°íšŒí•˜ë©´ ë” ë¹ ë¥¸ ì„±ëŠ¥ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ

### ë¶„ì‚°ë°ì´í„°ë² ì´ìŠ¤ë€
* NoSQLíƒ€ì…ì˜ ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì—ì„œ, ì—¬ëŸ¬ ëŒ€ì˜ ë…¸ë“œ, ì¦‰ ì—¬ëŸ¬ëŒ€ì˜ ì»´í“¨í„°ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ìš©ì ê´€ì ì—ì„œ   
  í•˜ë‚˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•˜ëŠ” ê±°ì„œëŸ¼ ë³´ì—¬ì§„ë‹¤.
* ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ëŒ€ì˜ ë…¸ë“œì— ì €ì¥í•œë‹¤.
* ë…¸ë“œë€ ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë™í•˜ëŠ” ë¬¼ë¦¬ì ì¸ ì„œë²„ì´ë©°, ê° ë…¸ë“œëŠ” ë‹¤ë¥¸ ë…¸ë“œì™€ ì„œë¡œ í†µì‹ í•œë‹¤.
* ì‚¬ìš©ìê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì“°ê¸° ì‘ì—…ì„ í•  ë•Œ, ë°ì´í„°ëŠ” ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” íŠ¹ì • ë…¸ë“œì— ì¨ì§€ë©°, ì‚¬ìš©ìëŠ” ì–´ë””ì— ë°ì´í„°ê°€ ì“°ì—¬ì¡ŒëŠ” ì§€ ì•Œì§€ ëª»í•¨
* ì‚¬ìš©ì íŠ¸ë˜í”½ì´ ëŠ˜ì–´ë‚¨ì— ë”°ë¼, ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ìëŠ” ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤ í™˜ê²½ì— ë…¸ë“œë¥¼ ë”í•¨ìœ¼ë¡œì¨ ì‰½ê²Œ ìˆ˜í‰í™•ì¥í•  ìˆ˜ ìˆìŒ
  
### CAPì´ë¡ 
> ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤ ì†ì„±ì— ê´€í•œ ì´ë¡ ì´ë©°, ì‹œìŠ¤í…œ ì¥ì• ë¡œ ì¸í•´ ëª‡ëª‡ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì™€ í†µì‹ í•  ìˆ˜ ì—†ì„ ë•Œ ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì œì–´í• ì§€ ê²°ì •    
> ì ì ˆí•œ ì‘ë‹µ ì‹œê°„ ë‚´ ì„¸ê°€ì§€ ì†ì„±ì„ ëª¨ë‘ ë§Œì¡±ì‹œí‚¤ëŠ” ë¶„ì‚°ì‹œìŠ¤í…œì„ êµ¬ì„±í•  ìˆ˜ ì—†ë‹¤ëŠ” ì´ë¡ 
* Consistency(ì¼ê´€ì„±), Availability(ê°€ìš©ì„±), Partition Tolerance(ë¶„í•  í—ˆìš©ì„±)ì˜ ì•½ì
* **Availability(ê°€ìš©ì„±)**

### Kafka vs RabbitMQ

### íŠ¸ëœì­ì…˜ phantom read ì‹¤ì œ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°
* [ì°¸ì¡°ë§í¬](https://studyandwrite.tistory.com/566)
```
@Service
public class UserService {

    @Autowired
    private UserRepository userRepository;

    @Transactional(isolation = Isolation.READ_COMMITTED)
    public void readUsers() {
        // íŠ¸ëœì­ì…˜ A: ì‚¬ìš©ì ì¡°íšŒ
        List<User> users = userRepository.findUsersByAgeGreaterThan(20);
        users.forEach(user -> System.out.println(user.getName()));

        // ì ì‹œ ëŒ€ê¸°
        try {
            Thread.sleep(10000); // 10ì´ˆ ëŒ€ê¸°
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        // ê°™ì€ ì¿¼ë¦¬ ì¬ì‹¤í–‰
        users = userRepository.findUsersByAgeGreaterThan(20);
        users.forEach(user -> System.out.println(user.getName()));
    }

    @Transactional
    public void addUser(User user) {
        // íŠ¸ëœì­ì…˜ B: ìƒˆ ì‚¬ìš©ì ì¶”ê°€
        userRepository.save(user);
    }
}
```

### IOC
### ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬
### DI
### í…ŒìŠ¤íŠ¸ëŠ” ì™œ í•´ì•¼í•˜ëŠ”ê°€?
### JdbcTemplate ì—ëŠ” ì–´ë–¤ ë””ìì¸íŒ¨í„´ì´ ë“¤ì–´ê°€ìˆëŠ”ê°€?
### ì™œ ê·¸ë ‡ê²Œ ìƒê°í•˜ëŠ”ê°€?
### ê·¸ ë””ìì¸ íŒ¨í„´ì„ ì ìš©í•¨ìœ¼ë¡œì¨ ë¬´ì—‡ì´ í¸í•´ì¡ŒëŠ”ê°€?
### ì˜ˆì™¸ì˜ ì •ì˜
### Checked Exception vs Unchecked Exception
### ì˜ˆì™¸ ì²˜ë¦¬ ë°©ë²•ë“¤
### íŠ¸ëœì­ì…˜ ê²½ê³„ ì„¤ì •
### íŠ¸ëœì­ì…˜ ë™ê¸°í™”
